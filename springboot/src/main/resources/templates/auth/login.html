<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">
<head>
  <meta charset="UTF-8">
  <title>Iniciar sesión - AlertAi</title>
  <!-- BOOTSTRAP   -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">

  <!-- FONT AWESOM  -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>

  <!-- CSS PERSONALIZADO -->
  <link rel="stylesheet" th:href="@{/css/style.css}">
  <link rel="stylesheet" th:href="@{/css/theme.css}">

  <!-- FAVICON (ICON DE LA PÁGINA) -->
  <link rel="icon" type="image/png" href="/img/icon-nav.png">
</head>
<body class="d-flex justify-content-center align-items-center vh-100">
  
  <div class="modal-dialog" style="width: 550px;">
    <div class="modal-content">
      <div class="modal-body p-5">
        <a href="/" class="back-link"><p><i class="bi bi-arrow-left-short me-2"></i><span th:text="#{back}">Atrás</span></p></a>

        <!-- MENSAJES -->
        <div class="text-center">
          <h4 class="fw-bold mb-3" th:text="#{login.title}">Iniciar sesión</h4>
           <!-- Mensaje de error al fallar el login -->
          <div th:if="${param.error}" class="alert text-center small" style="color: red;" role="alert" th:text="#{login.error}">
              Correo o contraseña incorrectos. Intenta nuevamente.
          </div>

          <!-- Mensaje al cerrar sesión correctamente -->
          <div th:if="${param.logout}" class="alert text-center small" style="color: green;" role="alert" th:text="#{login.logout}">
              Has cerrado sesión exitosamente.
          </div>
          <div th:if="${success}" class="alert text-center small" style="color: green;" role="alert" th:text="${success}">
            Contraseña restablecida con éxito.
          </div>
        </div>

        <form th:action="@{/userLogin}" method="post">
          <div class="mb-3">
              <input type="email" name="username" class="form-control muted" th:placeholder="#{login.email}" required
                onfocus="this.setAttribute('data-placeholder', this.placeholder), this.placeholder=''" 
                onblur="this.placeholder=this.getAttribute('data-placeholder')">
          </div>
          <div class="mb-3 position-relative small">
            <input type="password" name="password" id="password" class="form-control muted" th:placeholder="#{login.password}" required
              onfocus="this.setAttribute('data-placeholder', this.placeholder), this.placeholder=''" 
              onblur="this.placeholder=this.getAttribute('data-placeholder')">
            <i id="togglePassword" class="bi bi-eye-slash position-absolute top-50 end-0 translate-middle-y me-3" style="cursor: pointer;"></i>
          </div>                
          <div class="mb-3 d-flex justify-content-between align-items-center">
            <div class="form-check">
              <input class="form-check-input shadow" type="checkbox" id="remember-me" name="remember-me">
              <label class="form-check-label small" for="remember-me" th:text="#{login.remember}">Recuérdame</label>
            </div>
            <a href="/forgot-password" class="small forgot-password" th:text="#{login.forgot}">¿Olvidaste la contraseña?</a>
          </div>
          <div class="submit mt-2">
            <button type="submit" class="btn btn-submit">Entrar</button>
          </div>

          <p class="text-center mt-4 small muted" th:text="#{login.footer}">
            Descubrí, compartí y participá de eventos importantes en tu comunidad.
          </p>
          <hr class="mt-3">

          <div class="text-center mt-3 small muted">
            <p th:utext="#{login.register.full_2}">
              ¿Es tu primera vez en AlertAi? <a href="register" class="ms-2"><strong>Regístrate.</strong></a>
            </p>
          </div>
        </form>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script th:src="@{/js/script.js}"></script>
  <script th:src="@{/js/theme.js}"></script>

</body>
</html>
